Ponerlo en la bd despues de correr el proyecto , asi ya estan las tablas creadas


CREATE TABLE IF NOT EXISTS auditoria_cuentas_repetidas (
  id INT(11) NOT NULL AUTO_INCREMENT,
  id_Cuenta bigint(20),
  PRIMARY KEY (id)
) ENGINE=InnoDB

delimiter //
CREATE TRIGGER check_cuentas_repetidas AFTER insert ON Cuentas
       FOR EACH ROW
       BEGIN
		insert into auditoria_cuentas_repetidas values (NULL,NEW.id);
       END;//
delimiter ;

delimiter //
CREATE TRIGGER eliminar_cuenta_repetida_asociada AFTER insert ON auditoria_cuentas_repetidas
       FOR EACH ROW
       BEGIN
		SET @nombre:="unacuenta", @periodo:="2010", @empresa_id:="1";
		
		select MIN(id) INTO @id_cuenta from Cuentas where nombre=@nombre and periodo=@periodo and empresa_id=@empresa_id;

		select nombre, periodo, empresa_id into @nombre, @periodo, @empresa_id from Cuentas where id=@id_cuenta;
		
		IF((select count(*) from Cuentas where nombre=@nombre and periodo=@periodo and empresa_id=@empresa_id)>1) THEN

		delete from Cuentas where id=@id_cuenta;

		END IF;
       END;//
delimiter ;
